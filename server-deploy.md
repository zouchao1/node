

### 服务器部署

假设我们的前端项目和后端项目已经开发完成了，前端是在我们自己的本地服务器开发的，后端也会在自己的服务器上开发完成，每开发到一个大阶段，或者是开发到最后，我们都需要将项目部署到外网服务器上（上线），至于如何部署我们的服务器，各个服务器都会启动什么服务，承载什么内容，服务器之间有什么关系这些都属于服务器部署计划。


在这里给大家需要介绍一下两种部署方案：

* 前后端不分离 (前后端耦合)

* 前后端分离

> 前端口中所指的分离与不分离，说的是数据的渲染方式，如果，我们font-end负责创建页面结构后，由back-end在浏览器访问的时候在HTML上面渲染好数据，这个叫ssr，也叫服务端渲染数据，这样的前后端开发方式也成为前后端不分离，而font-end利用数据交互技术与back-end进行数据交互然后由font-end将数据渲染在页面上，这叫bsr，也叫客户端渲染数据，，这样的前后端开发方式也成为前后端分离。

> 也就是说，我们以往的前后端分离与不分离指的是数据的渲染方式，在这里想要介绍的前后端分离与不分离指的是font-end资源与back-end服务器放置的位置关系。


##### 前后端不分离部署

前后端不分离，指的就是前端开发的所有代码及资源（dist）会直接放入到后端开发的服务器中，此时，client访问的时候所有的资源（html等）都交由的node提供，而数据请求都交由node提供

前后端不分离，back-end不仅提供数据请求还提供资源请求

> 客户端的请求一般分为两种：资源请求，数据请求

> 目前比较流行的webserver主要有两种： apache，nginx




##### 前后端分离部署

一个服务器提供资源，一个服务器提供数据

百度，将api接口资源和html文件资源放在了www.baidu.com服务器，而其他的css，js，image等资源放在了多个资源服务器上，也就是说百度将自己的代码部署在两种服务器上，一种后端服务器提供api接口和html页面，一种是前端服务器提供js逻辑，css样式等资源...



##### 两种部署方案的优缺点及适用场景


前后端不分离部署适合一些中小企业的中小级项目

如果前端代码有了新的版本，例如js或者css变化，这个适合前端重新打包代码后需要重新交给服务端进行部署

如果我们把服务器分开，一个apiserver，一个staticserver的话，前端有了新的js或者css代码后，只需要将staticserver中的代码进行替换，api server不需要进行重新部署


前后端分离部署的好处就在于无论是前端更新代码版本还是后端更新代码版本只需要在对应的服务器上进行更新就可以了，不需要另一台服务器做什么事情，更新维护更方便，成本更低。




### 代理方式

代理模式分为两种：正向代理和反向代理！

代理的目的是为了让我们请求到目标服务器的内容。


反向代理: 客户端请求B服务器的时候无法请求，但是客户端可以请求A服务器，所以客户端可以请求A服务器，让A请求B服务器，因为A请求到B服务器后反过来给了客户端，所以这种代理方式叫反向代理，A是代理服务器，B是目标服务器。

正向代理：客户端可以直接借助代理服务器去请求目标服务器



#### swiper

* swiper在初始化的过程中，需要传入最外层的容器，当我们页面中出现了n个swiper，需要实例化n次，为了避免swiper被实例化多次，为每一个swiper容器定义专属的类名，利用这个类名来实例化,但是不要影响自有的swiper-container

* 当我们swiper中的dom是需要动态数据来渲染的时候，可以将实例化放在前面，当dom更新后可以调用swiper的update方法来更新slide的数量。。。


预习： swiper也可以实现微场景




#### 总结M站项目架构

前端架构

	* 项目开发模式：RMVC（R: router, M: model, V: view, C: controller）
	* UI展示模式：SPA（single page application）+ MPA(multiply pages application)
	
    * 项目工程化：gulp + webpack(JS pack)
		* gulp: dev + prod
		* dev: webserver + sass + packjs + mock
		* prod: sass + packjs + version + compress

 	* webpack:
		* string-loader + bable-loader

库、框架

	Yo(ui框架) + flexible + zepto + better-scroll + swiper + animate.css ....

路由
	自己开发的

模板引擎	
    handlebars

前后端开发架构

	前后端分离的架构 （Front-end + JSON + Back-end）

SPA + MPA 区别
	* SPA
      - 优点：用户体验 perfect nice awesome，变量共享
      - 缺点：不利于SEO优化 性能不好
  	* MPA
      - 优点：性能会好
      - 缺点：用户体验差，变量不共享

项目发布方式
	* 前后端不分离的发布方式
	* 前后端分离的发布方式